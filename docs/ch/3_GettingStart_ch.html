<!DOCTYPE html>
<html lang="中文">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>准备工作 | OpenNCC技术文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="开放人工智能摄像机">
    
    <link rel="preload" href="/openncc/assets/css/0.styles.58b6422a.css" as="style"><link rel="preload" href="/openncc/assets/js/app.28318b88.js" as="script"><link rel="preload" href="/openncc/assets/js/2.3c79b12d.js" as="script"><link rel="preload" href="/openncc/assets/js/19.ecce93aa.js" as="script"><link rel="prefetch" href="/openncc/assets/js/10.a7c55878.js"><link rel="prefetch" href="/openncc/assets/js/11.dac5cc06.js"><link rel="prefetch" href="/openncc/assets/js/12.a87e4bef.js"><link rel="prefetch" href="/openncc/assets/js/13.c1c82468.js"><link rel="prefetch" href="/openncc/assets/js/14.29041312.js"><link rel="prefetch" href="/openncc/assets/js/15.c5dab6c0.js"><link rel="prefetch" href="/openncc/assets/js/16.93057c8d.js"><link rel="prefetch" href="/openncc/assets/js/17.4471bc15.js"><link rel="prefetch" href="/openncc/assets/js/18.c23a9d01.js"><link rel="prefetch" href="/openncc/assets/js/20.e3ab8106.js"><link rel="prefetch" href="/openncc/assets/js/21.c332463a.js"><link rel="prefetch" href="/openncc/assets/js/22.d559039d.js"><link rel="prefetch" href="/openncc/assets/js/23.11167432.js"><link rel="prefetch" href="/openncc/assets/js/24.a2db2384.js"><link rel="prefetch" href="/openncc/assets/js/25.b79e59b6.js"><link rel="prefetch" href="/openncc/assets/js/26.efe78b4b.js"><link rel="prefetch" href="/openncc/assets/js/27.4d5220cb.js"><link rel="prefetch" href="/openncc/assets/js/28.c011c711.js"><link rel="prefetch" href="/openncc/assets/js/29.f496357c.js"><link rel="prefetch" href="/openncc/assets/js/3.b8c255b5.js"><link rel="prefetch" href="/openncc/assets/js/30.5cf906b0.js"><link rel="prefetch" href="/openncc/assets/js/4.1976e373.js"><link rel="prefetch" href="/openncc/assets/js/5.61bbcaac.js"><link rel="prefetch" href="/openncc/assets/js/6.023a612b.js"><link rel="prefetch" href="/openncc/assets/js/7.52c5eff1.js"><link rel="prefetch" href="/openncc/assets/js/8.b98a5e0c.js"><link rel="prefetch" href="/openncc/assets/js/9.5b14aad7.js">
    <link rel="stylesheet" href="/openncc/assets/css/0.styles.58b6422a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/openncc/ch/" class="home-link router-link-active"><!----> <span class="site-name">OpenNCC技术文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.openncc.com.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenNCC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/eyecloud/openncc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.openvinotoolkit.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenVINO
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/openncc/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/openncc/ch/3_GettingStart_ch.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.openncc.com.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenNCC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/eyecloud/openncc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.openvinotoolkit.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenVINO
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/openncc/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/openncc/ch/3_GettingStart_ch.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/openncc/ch/1_Introduction_ch.html" class="sidebar-link">OpenNCC介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/1_Introduction_ch.html#openncc-概述" class="sidebar-link">OpenNCC 概述</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/1_Introduction_ch.html#openncc-功能介绍" class="sidebar-link">OpenNCC 功能介绍</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/1_Introduction_ch.html#openncc系列产品" class="sidebar-link">OpenNCC系列产品</a></li></ul></li><li><a href="/openncc/ch/2_HardwareManual_ch.html" class="sidebar-link">OpenNCC 硬件手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/2_HardwareManual_ch.html#硬件规格" class="sidebar-link">硬件规格</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/2_HardwareManual_ch.html#开箱展示" class="sidebar-link">开箱展示</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/2_HardwareManual_ch.html#硬件启动" class="sidebar-link">硬件启动</a></li></ul></li><li><a href="/openncc/ch/3_GettingStart_ch.html" aria-current="page" class="active sidebar-link">OpenNCC 快速开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#快速入门之linux" class="sidebar-link">快速入门之linux</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#快速入门之windows" class="sidebar-link">快速入门之Windows</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#快速入门之raspberry-pi" class="sidebar-link">快速入门之Raspberry Pi</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#快速入门之nvidia" class="sidebar-link">快速入门之NVIDIA</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#快速入门之yolo数据的云端推送" class="sidebar-link">快速入门之YOLO数据的云端推送</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#custom-自定义" class="sidebar-link">Custom（自定义）</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/3_GettingStart_ch.html#运行结果演示" class="sidebar-link">运行结果演示</a></li></ul></li><li><a href="/openncc/ch/4_NccView_ch.html" class="sidebar-link">OpenNCC View说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/4_NccView_ch.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/4_NccView_ch.html#模型解析" class="sidebar-link">模型解析</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/4_NccView_ch.html#功能点详细介绍" class="sidebar-link">功能点详细介绍</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/4_NccView_ch.html#算法加速功能介绍" class="sidebar-link">算法加速功能介绍</a></li></ul></li><li><a href="/openncc/ch/5_SoftwareManual_ch.html" class="sidebar-link">软件开发包手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#sdk结构" class="sidebar-link">SDK结构</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#支持的产品及平台" class="sidebar-link">支持的产品及平台</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#已集成的ai模型" class="sidebar-link">已集成的AI模型</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#openvino-安装和使用" class="sidebar-link">OpenVINO 安装和使用</a></li><li class="sidebar-sub-header"><a href="/openncc/ch/5_SoftwareManual_ch.html#openncc运行机制" class="sidebar-link">OpenNCC运行机制</a></li></ul></li><li><a href="/openncc/ch/6_SdkApi_ch.html" class="sidebar-link">OpenNCC SDK接口文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/6_SdkApi_ch.html#openncc-sdk-api-3-0-x接口文档" class="sidebar-link">OpenNCC SDK API 3.0.x接口文档</a></li></ul></li><li><a href="/openncc/ch/7_OpenvinoInstall_ch.html" class="sidebar-link">OpenVINO安装说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/7_OpenvinoInstall_ch.html#openvino安装指南" class="sidebar-link">OpenVINO安装指南</a></li></ul></li><li><a href="/openncc/ch/8_DownloadLink_ch.html" class="sidebar-link">安装包和源码下载地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openncc/ch/8_DownloadLink_ch.html#下载地址" class="sidebar-link">下载地址</a></li></ul></li><li><a href="/openncc/ch/9_FAQ_ch.html" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h2> <h3 id="下载software-development-kit-sdk"><a href="#下载software-development-kit-sdk" class="header-anchor">#</a> 下载Software Development Kit(SDK)</h3> <ul><li>进入<a href="https://www.openncc.com.cn/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>点击<font color="blue"><strong>→</strong></font>访问SDK仓库</li></ul> <p><img src="/openncc/docimg/ch/download.png" alt="img"></p> <ul><li>下载压缩包或复制地址使用Git克隆即可。</li></ul> <p><img src="/openncc/docimg/ch/git.png" alt="image-20210702134237102"></p> <p>下载完成后进入<code>openncc/Platform</code>，目录如下图：</p> <div class="language- extra-class"><pre class="language-text"><code>└─ Platform
├─ Linux
|   └─ NVIDIA
|   └─ RaspberryPi
|   └─ Ubuntu
├─ Windows
├─ Custom
├─ README.md
</code></pre></div><p>选择需求的文件目录进入，对应文件夹内包含环境搭建的脚本。</p> <hr> <p><font color="red">警告：环境搭建脚本会自动生成和覆盖相关文件，运行前请确认是首次运行或已经完成备份。</font></p> <hr> <h2 id="快速入门之linux"><a href="#快速入门之linux" class="header-anchor">#</a> 快速入门之linux</h2> <h3 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h3> <ul><li>进入目录<code>opennccc/Platform/Linux/Ubuntu</code>。</li> <li>右键打开终端。</li> <li>输入命令 <code>./build_ubuntu.sh</code>。</li></ul> <p>生成目录如下：</p> <div class="language- extra-class"><pre class="language-text"><code>└─ Ubuntu
	├─ Example
	├─ Source
	├─ Viewer
	├─ build_Ubuntu.sh
	├─ README.md
</code></pre></div><h3 id="openncc-linux操作演示"><a href="#openncc-linux操作演示" class="header-anchor">#</a> OpenNCC_Linux操作演示</h3> <ul><li><p>进入openncc/Platform/Linux/Ubuntu/Viewer/OpenNcc_Linux 目录。</p></li> <li><p>右键打开终端，执行<code>sudo ./AppRun</code>，启动软件。</p></li> <li><p>连接OpenNCC相机到电脑USB 3.0接口，点击<code>Get device info</code> 按钮获取设备信息，此时log区域会有两种提示：</p> <p>- USB3.0：USB interface is 3.0, yuv outflow is currently available。</p> <p>- USB2.0：USB interface is not 3.0, yuv outflow will be disabled。</p></li></ul> <hr> <p><font color="red">提示：OpenNCC TYPE-C接口有正反接入两种模式，分别对应USB3.0 和 USB2.0。受传输速率影响，USB2.0模式下会暂时禁用YUV420P格式的视频流输出 。</font></p> <hr> <p><img src="/openncc/docimg/ch/linux_view1.png" alt="image-20210702142441399"></p> <p><img src="/openncc/docimg/ch/linux_view2.png" alt="image-20210702142529686"></p> <p>​		如果需要切换USB模式，旋转TPYE-C接口再次接入，重新点击Get device info按钮即可。如果仍然没有改变，请检查电脑USB接口类型或<a href="https://www.openncc.com.cn/jszc" target="_blank" rel="noopener noreferrer">联系我们<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <ul><li><p>任意选择一种视频流格式 yuv420p/H.264/H.265/mjpeg。</p></li> <li><p><code>Stream Resolution</code>：两种分辨率可供选择，1080p和4K。（具体由OpenNCC产品类型决定）</p></li></ul> <p><img src="/openncc/docimg/ch/linux_view3.png" alt="image-20210702142649007"></p> <ul><li><code>1st network model</code>：选择算法模型。</li></ul> <p><img src="/openncc/docimg/ch/linux_view4.png" alt="img"></p> <p>目前支持10多种模型可选，选择None即不加载模型，仅显示原始视频流。</p> <ul><li>可以通过框选ROI区域限制算法区域，算法只对区域内的场景进行识别。</li></ul> <p>（具体见<a href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C%E6%BC%94%E7%A4%BA">运行结果</a>展示）</p> <ul><li><code>2nd network model</code>：选择二级算法模型。</li></ul> <p>示例模型：vehicle-license-plate-detection-barrier-0106-fp16</p> <p><img src="/openncc/docimg/ch/linux_view5.png" alt="img"></p> <ul><li><p><code>Model Score</code> ：设置算法识别的最低分数，达到阈值后才会在画面中框选出识别结果。</p></li> <li><p><code>Display Scaler</code> ：设置视频显示窗体大小，可以调节显示窗口分辨率。</p></li> <li><p><code>Exposure control</code>：设置曝光，可以选择Auto和Manual，当选择Manual时，可以自己设置Exposure times和iso。</p></li></ul> <p><img src="/openncc/docimg/ch/linux_view6.png" alt="img"></p> <p><img src="/openncc/docimg/ch/linux_view7.png" alt="image-20210702143055575"></p> <ul><li>勾选<code>show state</code>，选择是否在画面上显示当前状态信息，包括视频流帧率、算法帧率、分辨率、设备id。</li> <li>勾选<code>inference accelerate</code>，选择是否启用算法加速.（必须在加载算法模型前选择）。</li></ul> <p><img src="/openncc/docimg/ch/linux_view8.png" alt="img"></p> <ul><li>勾选<code>save_avi</code>，视频将在打开视频流后，以时间命名的avi文件保存到目录openncc/Platform/Linux/Viewer/OpenNcc_Linux /avi文件夹下。当关闭视频流后，视频会停止保存。（yuv420p没有此项）</li></ul> <p><img src="/openncc/docimg/ch/linux_view9.png" alt="img"></p> <h2 id="快速入门之windows"><a href="#快速入门之windows" class="header-anchor">#</a> 快速入门之Windows</h2> <h3 id="环境搭建-2"><a href="#环境搭建-2" class="header-anchor">#</a> 环境搭建</h3> <ul><li><p>进入openncc/Platform/Windows</p></li> <li><p>双击运行<code>build_windows.bat</code>。</p></li> <li><p>结果如下：</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>└─ Windows
	├─ Source
	├─ Viewer
	├─ build_windows.sh
	├─ README.md
</code></pre></div><ul><li>脚本运行成功后，进入openncc/Platform/Windows/Drivers目录, 安装Windows USB驱动。详细安装步骤见 <font color="blue">OpenNCC_USB_Driver_install_guide_win.pdf</font>。</li></ul> <h3 id="openncc-windows操作演示"><a href="#openncc-windows操作演示" class="header-anchor">#</a> OpenNCC_Windows操作演示</h3> <ul><li>进入openncc/Platform/Windows/Viewer/OpenNcc_Windows 目录。</li> <li>双击运行 <code>OpenNCC.exe</code>。</li> <li>后续操作同<a href="#OpenNCC_Linux%E6%93%8D%E4%BD%9C%E6%BC%94%E7%A4%BA">OpenNCC_Linux</a></li></ul> <h2 id="快速入门之raspberry-pi"><a href="#快速入门之raspberry-pi" class="header-anchor">#</a> 快速入门之Raspberry Pi</h2> <h3 id="环境搭建-3"><a href="#环境搭建-3" class="header-anchor">#</a> 环境搭建</h3> <ul><li><p>打开终端</p></li> <li><p>进入openncc/Platform/Linux/RaspberryPi</p></li> <li><p>输入命令 <code>./build_raspberryp.sh</code>。</p></li></ul> <p>运行成功后，会生成目录如下：</p> <div class="language- extra-class"><pre class="language-text"><code>└── Raspberry
	├── Example
	├── Source
	├── Viewer
	├── build_raspberrypi.sh
	├── README.md
</code></pre></div><h3 id="openncc-raspberry-操作演示"><a href="#openncc-raspberry-操作演示" class="header-anchor">#</a> OpenNCC_Raspberry 操作演示</h3> <hr> <p><font color="red">提示：运行OpenNCC_Raspberry之前，请先查看设备号并<a href="https://www.openncc.com.cn/jszc" target="_blank" rel="noopener noreferrer">联系我们<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>获取密钥，设备号获取方法详见 openncc/Platform/Raspberry/ReadMe.md</font></p> <hr> <ul><li>将密钥文件（eyecloud.key）复制到目录openncc/Platform/Linux/RaspberryPi/Viewer/OpenNcc_Raspberry/Configuration/fw</li> <li>回到目录l openncc/Platform/Linux/RaspberryPi/Viewer/OpenNcc_Raspberry</li> <li>打开终端，执行 <code>sudo ./AppRun</code>，启动软件。</li> <li>后续操作同<a href="#OpenNCC_Linux%E6%93%8D%E4%BD%9C%E6%BC%94%E7%A4%BA">OpenNCC_Linux</a>。</li></ul> <h2 id="快速入门之nvidia"><a href="#快速入门之nvidia" class="header-anchor">#</a> 快速入门之NVIDIA</h2> <h3 id="环境搭建-4"><a href="#环境搭建-4" class="header-anchor">#</a> 环境搭建</h3> <ul><li>进入目录<code>opennccc/Platform/Linux/NVIDIA</code>。</li> <li>右键打开终端。</li> <li>输入命令 <code>./build_nvidia.sh</code>。</li></ul> <p>运行成功后，会生成目录如下：</p> <div class="language- extra-class"><pre class="language-text"><code>└─ NVIDIA
	├─ Example
	├─ Source
	├─ build_nvidia.sh
	├─ README.md
</code></pre></div><h2 id="快速入门之yolo数据的云端推送"><a href="#快速入门之yolo数据的云端推送" class="header-anchor">#</a> 快速入门之YOLO数据的云端推送</h2> <h3 id="环境搭建-5"><a href="#环境搭建-5" class="header-anchor">#</a> 环境搭建</h3> <p><font color="red">提示：本操作基于上述几个平台的opencv等基础环境已经搭建完毕。</font></p> <ul><li>在此基础上，针对ubuntu和Raspberry</li></ul> <div class="language- extra-class"><pre class="language-text"><code>cd ~
wget http://curl.haxx.se/download/curl-7.57.0.tar.gz
tar -xzvf curl-7.57.0.tar.gz
cd curl-7.57.0/
./configure
make
sudo make install
</code></pre></div><ul><li>针对NVIDIA</li></ul> <div class="language- extra-class"><pre class="language-text"><code>1.install zlib:
$ down from http://zlib.net/zlib-1.2.5.tar.gz
$ tar zxf zlib-1.2.5
$ cd zlib-1.2.5
$ mkdir zlib_install
$ export CC=gcc
$ ./configure --prefix=/home/zlib-1.2.5/zlib_install
$ make -j8
$ make install

2.install openssl:
$ down from https://www.openssl.org/source/openssl-3.0.1.tar.gz
$ tar zxf openssl-3.0.1.tar.gz
$ cd openssl-3.0.1
$ mkdir openssl_install
$ ./config no-asm shared --prefix=/home/openssl-3.0.1/openssl_install
$ make -j8
$ make install

3.install curl:
$ wget http://curl.haxx.se/download/curl-7.57.0.tar.gz
$ tar -xzvf curl-7.57.0.tar.gz
$ cd curl-7.57.0/
$ ./configure --with-openssl=/home/openssl/openssl_install
$ make
$ make install
</code></pre></div><h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p>该程序旨在帮助用户方便地在OpenNCC上使用YOLO模型，包括YOLO的训练和转化，模型在OpenNCC设备上的部署，识别结果的打包并上传云端。<br> <font color="red">提示：本演示已带默认生成的yolo模型数据。</font></p> <h3 id="操作演示"><a href="#操作演示" class="header-anchor">#</a> 操作演示</h3> <ul><li><p>打开终端</p></li> <li><p>针对不同平台进入openncc/Platform/NVIDIA</p> <p>或者 openncc/Platform/Raspberry</p> <p>或者 openncc/Platform/Ubuntu</p></li> <li><p>相对应输入命令 <code>./build_nvidia.sh</code> 或者 <code>build_raspberrypi.sh</code>  或者  <code>./build_ubuntu.sh</code>。</p></li> <li><p>运行成功后，会相应生成目录</p></li> <li><p>进入 <code>Example/How_to/OpenNCC/C&amp;C++/How_to_use_sdk</code> 目录</p></li> <li><p>输入命令 <code>make all</code></p></li> <li><p>编译成功后进入bin目录 <code>cd ./bin</code></p></li> <li><p>输入命令  <code>sudo ./OpenNCC 5</code> 执行程序</p></li></ul> <p><font color="red">提示：程序首次运行请查看终端打印获取该设备的设备号，请<a href="https://www.openncc.com.cn/jszc" target="_blank" rel="noopener noreferrer">联系我们<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>为该设备开通云端权限。</font></p> <p><img src="/openncc/docimg/ch/yolo_1.png" alt="img"></p> <h3 id="关于yolo模型训练"><a href="#关于yolo模型训练" class="header-anchor">#</a> 关于YOLO模型训练</h3> <p>介绍如何进行模型训练，训练获得的数据提供给<a href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E4%B9%8BYOLO%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BA%91%E7%AB%AF%E6%8E%A8%E9%80%81">OpenNCC_YOLO</a>使用。</p> <h4 id="安装环境依赖"><a href="#安装环境依赖" class="header-anchor">#</a> 安装环境依赖</h4> <ul><li><p><em>CMake &gt;= 3.18</em>*: <code>https://cmake.org/download/</code></p></li> <li><p><em>Powershell</em>* (already installed on windows): <code>https://docs.microsoft.com/en-us/powershell/scripting/install/installing-powershell</code></p></li> <li><p><em>CUDA &gt;= 10.2</em>*（可选）: <code>https://developer.nvidia.com/cuda-toolkit-archive</code></p></li> <li><p><em>OpenCV &gt;= 2.4</em>*</p></li> <li><p><em>cuDNN &gt;= 8.0.2</em>*（可选） <code>https://developer.nvidia.com/rdp/cudnn-archive</code></p></li> <li><ul><li>(on <strong>Linux</strong> follow steps described here) <code>https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#installlinux-tar</code></li></ul></li> <li><ul><li>(onWindows follow steps described here) <code>https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#installwindows)</code></li></ul></li> <li><p><em>GPU with CC &gt;= 3.0</em>*（可选）: https://en.wikipedia.org/wiki/CUDA#GPUs_supported</p></li></ul> <h4 id="训练工具编译"><a href="#训练工具编译" class="header-anchor">#</a> 训练工具编译</h4> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/AlexeyAB/darknetcd darknet
mkdir build_releasecd build_release
cmake ..
cmake --build . --target install --parallel 8
</code></pre></div><h4 id="准备数据集"><a href="#准备数据集" class="header-anchor">#</a> 准备数据集</h4> <ul><li>训练集图片放在train文件夹内，验证集放在val文件夹内</li></ul> <h4 id="数据标注"><a href="#数据标注" class="header-anchor">#</a> 数据标注</h4> <div class="language- extra-class"><pre class="language-text"><code>git clone https://hub.fastgit.org/AlexeyAB/Yolo_mark.git     
cmake .     
make    
./linux_mark.sh
</code></pre></div><ul><li>关于标注的使用方法可查看Yolo_mark目录内的readme.md</li></ul> <h4 id="参数配置"><a href="#参数配置" class="header-anchor">#</a> 参数配置</h4> <ul><li>除两个数据集外，启动训练还需要配置几个参数文件，包括obj.data，obj.name，train.txt。</li></ul> <p>以上三个文件,会在数据标注时自动生成在<code>Yolo_mark/x64/Release/data</code>目录下：</p> <p>obj.name文件包含所有目标的类别名，train.txt包含所有训练图片路径，val.txt非必须，可以手动从train文件中分割出30%的图片用于验证。而obj.data文件申明了上述所有文件的路径和类别总数，如果使用自己的数据集，对应参数修改请在标注前完成修改。</p> <ul><li>yolo.cfg(拓扑)<br>
Yolo.conv（预训练权重）
cfg和conv存在一定对应关系，考虑此处训练的模型最终需部署在openncc上，推荐使用（yolov4-tiny.cfg+yolov4-tiny.conv.29）或（yolov3-tiny.cfg+yolov3-tiny.conv.11）的搭配，cfg文件可以直接在darknet/cfg目录下找到。
Cfg文件修改！！
如果目标类别数量不等于80，则必须修改cfg文件。
搜索cfg文件中所有yolo层的位置，若总共有3 类目标，则将[yolo]层classes参数定义为3，再将[yolo]上一层[convolutional]层的filters定义为24.计算方式为filters=（classes+5）*3。
对yolov4-tiny.cfg来说有两个yolo层，所以一共需要修改4个参数。</li></ul> <p><img src="/openncc/docimg/ch/yolo_3.png" alt="img"></p> <h4 id="启动训练"><a href="#启动训练" class="header-anchor">#</a> 启动训练</h4> <p>第二步编译成功后，会在darknet目录下生成./darknet工具。</p> <p>输入命令：</p> <div class="language- extra-class"><pre class="language-text"><code>./darknet detector train ./obj.data ./yolov4-tiny.cfg ./yolov4-tiny.conv.2
</code></pre></div><p><img src="/openncc/docimg/ch/yolo_4.png" alt="img"></p> <p>如果你使用显卡训练，显存小于8G的显卡，需要在cfg的第一层[net]中将batch参数改到8以下（8，4，2，1）。
若训练进行顺利，可看到如下图的训练日志图表。
训练结束后，可看到一系列.weights文件。这里还是建议制作数据集时设置一个验证集，这样可以直接锁定验证集中map最高的权重yolov4-tiny_best.weights作为后续使用。</p> <ul><li>Darknet to tensorflow</li></ul> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/RenLuXi/tensorflow-yolov4-tiny.git
cd tensorflow-yolov4-tiny
python convert_weights_pb.py --class_names obj.names --weights_file yolov4-tiny_best.weights --tiny
</code></pre></div><p>这里需要用到第五步中obj.names和yolov4-tiny_best.weights.</p> <ul><li>Tensorflow to IR(openvino推理格式)<br>
修改json配置文件
打开tensorflow-yolov4-tiny目录下的yolo_v4_tiny.json，将其中的classes值修改为你自己的类别数，openvino进行tensorflow转换需要用到这个文件。
然后替换json配置文件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ cp ./yolo_v4_tiny.json  /opt/intel/openvino/deployment_tools/model_optimizer/extensions/front/tf
</code></pre></div><p>进入openvino模型转换工具目录</p> <div class="language- extra-class"><pre class="language-text"><code>$ cd /opt/intel/openvino/deployment_tools/model_optimizer
</code></pre></div><p>转换命令</p> <div class="language- extra-class"><pre class="language-text"><code>$ python mo.py --input_model yolov4-tiny.pb --transformations_config ./extensions/front/tf/yolo_v4_tiny.json --batch 1 --data_type FP32 --reverse_input_channels
</code></pre></div><ul><li>IR to blob
老办法，先初始化openvino环境，然后把上一步生成的xml和bin文件丢过去转换</li></ul> <div class="language- extra-class"><pre class="language-text"><code>source /opt/intel/openvino_2020.3.194/bin/setupvars.sh

cd /opt/intel/openvino_2020.3.194/deployment_tools/inference_engine/lib/intel64

cp /opt/intel/openvino/deployment_tools/model_optimizer/yolov4-tiny.xml ./
cp /opt/intel/openvino/deployment_tools/model_optimizer/yolov4-tiny.bin ./

/opt/intel/openvino_2020.3.194/deployment_tools/inference_engine/lib/intel64/myriad_compile -m yolov4-tiny.xml -o yolov4-tiny.blob -VPU_MYRIAD_PLATFORM VPU_MYRIAD_2480 -VPU_NUMBER_OF_SHAVES 6 -VPU_NUMBER_OF_CMX_SLICES 6
</code></pre></div><h4 id="使用模型"><a href="#使用模型" class="header-anchor">#</a> 使用模型</h4> <ul><li>转化完成后，至此，已经获得了在OpenNCC上部署所需的全部模型文件，xml，bin和blob。</li></ul> <h2 id="custom-自定义"><a href="#custom-自定义" class="header-anchor">#</a> Custom（自定义）</h2> <h3 id="环境搭建-6"><a href="#环境搭建-6" class="header-anchor">#</a> 环境搭建</h3> <ul><li><p>进入openncc/Platform/Custom。</p></li> <li><p>右键打开终端。</p></li> <li><p>输入命令 <code>./custom.sh</code></p></li></ul> <hr> <p><font color="red">提示：如需在自定义平台运行，请<a href="https://www.openncc.com.cn/jszc" target="_blank" rel="noopener noreferrer">联系我们<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>获取定制化服务。</font></p> <hr> <h2 id="运行结果演示"><a href="#运行结果演示" class="header-anchor">#</a> 运行结果演示</h2> <p>以物体分类算法模型为例：</p> <p>香蕉在算法区域内结果：</p> <p><img src="/openncc/docimg/ch/bannna.png" alt="image-20210702145523142"></p> <p>苹果在算法区域内结果：</p> <p><img src="/openncc/docimg/ch/apple.png" alt="image-20210702145621696"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/openncc/ch/2_HardwareManual_ch.html" class="prev">
        OpenNCC 硬件手册
      </a></span> <span class="next"><a href="/openncc/ch/4_NccView_ch.html">
        OpenNCC View说明
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/openncc/assets/js/app.28318b88.js" defer></script><script src="/openncc/assets/js/2.3c79b12d.js" defer></script><script src="/openncc/assets/js/19.ecce93aa.js" defer></script>
  </body>
</html>
